define("crushinator",["exports"],function(e){"use strict";function t(e){throw new Error(e)}function n(e){k&&"function"==typeof console.warn&&console.warn(e)}function r(e){return void 0===e||null===e||!1===e}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0===e?t:!!e}function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=e;return!0===e&&(o=n||1),r(e)&&(o=n),o=Number(o),isFinite(o)||(t('"'+e+'" is not a finite number'),o=n),o}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w({},o(e.defaults,!0)?j:{},e)}function i(e){return e.afterResize?"c":"precrop"}function s(e){var t=[];return t.push(a(e.width)),t.push(a(e.height)),(Object.prototype.hasOwnProperty.call(e,"x")||Object.prototype.hasOwnProperty.call(e,"y"))&&(t.push(a(e.x)),t.push(a(e.y))),t.join(",")}function d(e){var t={};return e.fit&&e.width&&e.height&&(w(t,{op:"^",c:a(e.width)+","+a(e.height)}),e.align||(t.gravity="t")),t}function u(e){var t={},n=e.unsharp;return n&&w(t,{u:{r:a(n.radius,2),s:a(n.sigma,.5),a:a(n.amount,.8),t:a(n.threshold,.03)}}),t}function f(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n],o=n.match(/([^-]+)-+(.*)/);o?(t[o[1]]=t[o[1]]||{},t[o[1]][o[2]]=r):t[n]=r}),t}function m(e){var t={},n=f(e);return Object.keys(n).forEach(function(e){var r=n[e];switch(e){case"width":t.w=a(r);break;case"height":t.h=a(r);break;case"quality":t.quality=a(r);break;case"fit":w(t,d(n));break;case"align":t.gravity={top:"n",left:"w",center:"c",middle:"c",right:"e",bottom:"s"}[r]||"c";break;case"crop":t[i(r)]=s(r);break;case"blur":t.blur="object"===(void 0===r?"undefined":v(r))?a(r.radius)+","+a(r.sigma,2):"0,"+a(r,2);break;case"gamma":t.gamma="object"===(void 0===r?"undefined":v(r))?a(r.red,1)+","+a(r.green,1)+","+a(r.blue,1):a(r,1);break;case"grayscale":case"greyscale":t.grayscale=100*a(r,1);break;case"unsharp":w(t,u(n));break;case"query":w(t,r||{})}}),t}function l(e){return encodeURIComponent(e)}function p(e,t){var n=[];return Object.keys(e).forEach(function(r){var o=e[r],a=t?t+"["+r+"]":r;n.push("object"===(void 0===o?"undefined":v(o))?p(o,a):l(a)+"="+l(o))}),n.join("&")}function h(e){return String(e).replace(/.*\/\/([^\/]+).*/,"$1")}function g(e){return-1!==q.indexOf(h(e))}function b(e){var t=String(e).match(/(.+)?\/\/(?:(?:img(?:-ssl)?|pi)\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return t?b(t[1]+"//"+t[2]):e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=b(e);if(!g(r))return r;var o={};return"string"==typeof t&&(n("Sending Crushinator options as a query string is deprecated. Please use the object format."),o=t),"object"===(void 0===t?"undefined":v(t))&&(o=p(m(c(w({defaults:P.defaults},t))))),S(P.host+"/r/"+r.replace(/.*\/\//,"")+(o?"?"+o:""))}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k="object"===("undefined"==typeof console?"undefined":v(console)),j={fit:!0,unsharp:!0,quality:82},O=function(e){return"%"+e.charCodeAt(0).toString(16)},S=function(e){return e.replace(/[()'"]/g,O)},q=["assets.tedcdn.com","assets2.tedcdn.com","ems.ted.com","ems-staging.ted.com","images.ted.com","pa.tedcdn.com","pb-assets.tedcdn.com","pe.tedcdn.com","pf.tedcdn.com","ph.tedcdn.com","pj.tedcdn.com","pk.tedcdn.com","pl.tedcdn.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","staging.ted.com","storage.ted.com","talkstar-photos.s3.amazonaws.com","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","tedcdnpf-a.akamaihd.net","tedconfblog.files.wordpress.com","tedideas.files.wordpress.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","userdata.amara.org","www.filepicker.io","www.ted.com"],P={defaults:!0,host:"https://pi.tedcdn.com"};e.imageHosts=q,e.config=P,e.crushable=g,e.uncrush=b,e.crush=y,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})});
