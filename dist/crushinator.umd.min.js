!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).crushinator={})}(this,function(t){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o])}return t}).apply(this,arguments)}var a="object"===("undefined"==typeof console?"undefined":u(console));function m(t,e){var c,o=1<arguments.length&&void 0!==e?e:0,n=t;return!0===t&&(n=o||1),null!=(c=t)&&!1!==c||(n=o),n=Number(n),isFinite(n)||(function(t){throw new Error(t)}('"'.concat(t,'" is not a finite number')),n=o),n}var c={fit:!0,unsharp:!0,quality:82};function r(t){var e=0<arguments.length&&void 0!==t?t:{};return f({},function(t,e){return void 0===t?1<arguments.length&&void 0!==e&&e:t}(e.defaults,!0)?c:{},e)}function s(t){var o,n,i={},d=(o=t,n={},Object.keys(o).forEach(function(t){var e=o[t],c=t.match(/([^-]+)-+(.*)/);c?(n[c[1]]=n[c[1]]||{},n[c[1]][c[2]]=e):n[t]=e}),n);return Object.keys(d).forEach(function(t){var e,c,o,n,a,r,s=d[t];switch(t){case"width":i.w=m(s);break;case"height":i.h=m(s);break;case"quality":i.quality=m(s);break;case"fit":f(i,(r={},(a=d).fit&&a.width&&a.height&&(f(r,{op:"^",c:"".concat(m(a.width),",").concat(m(a.height))}),a.align||(r.gravity="t")),r));break;case"align":i.gravity={top:"n",left:"w",center:"c",middle:"c",right:"e",bottom:"s"}[s]||"c";break;case"crop":i[s.afterResize?"c":"precrop"]=((n=[]).push(m((o=s).width)),n.push(m(o.height)),(Object.prototype.hasOwnProperty.call(o,"x")||Object.prototype.hasOwnProperty.call(o,"y"))&&(n.push(m(o.x)),n.push(m(o.y))),n.join(","));break;case"blur":i.blur="object"===u(s)?"".concat(m(s.radius),",").concat(m(s.sigma,2)):"0,".concat(m(s,2));break;case"gamma":i.gamma="object"===u(s)?"".concat(m(s.red,1),",").concat(m(s.green,1),",").concat(m(s.blue,1)):m(s,1);break;case"grayscale":case"greyscale":i.grayscale=100*m(s,1);break;case"unsharp":f(i,(e={},(c=d.unsharp)&&f(e,{u:{r:m(c.radius,2),s:m(c.sigma,.5),a:m(c.amount,.8),t:m(c.threshold,.03)}}),e));break;case"query":f(i,s||{})}}),i}function i(t){return encodeURIComponent(t)}function d(t){return"%".concat(t.charCodeAt(0).toString(16))}var e=["assets.tedcdn.com","assets2.tedcdn.com","ems.ted.com","ems-staging.ted.com","ideas.ted.com","images.ted.com","pa.tedcdn.com","pb-assets.tedcdn.com","pe.tedcdn.com","pf.tedcdn.com","ph.tedcdn.com","pj.tedcdn.com","pk.tedcdn.com","pl.tedcdn.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","staging.ted.com","storage.ted.com","talkstar-assets.s3.amazonaws.com","talkstar-photos.s3.amazonaws.com","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","tedcdnpf-a.akamaihd.net","tedconfblog.files.wordpress.com","tedideas.files.wordpress.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","userdata.amara.org","www.filepicker.io","www.ted.com"],p={defaults:!0,host:"https://pi.tedcdn.com"};function l(t){return-1!==e.indexOf(String(t).replace(/.*\/\/([^/]+).*/,"$1"))}function h(t){var e=String(t).match(/(.+)?\/\/(?:(?:img(?:-ssl)?|pi)\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return e?h("".concat(e[1],"//").concat(e[2])):t}function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=h(t);if(!l(c))return c;var o,n={};return"string"==typeof e&&(o="Sending Crushinator options as a query string is deprecated. Please use the object format.",a&&"function"==typeof console.warn&&console.warn(o),n=e),"object"===u(e)&&(n=function o(n,a){var r=[];return Object.keys(n).forEach(function(t){var e=n[t],c=a?"".concat(a,"[").concat(t,"]"):t;r.push("object"===u(e)?o(e,c):"".concat(i(c),"=").concat(i(e)))}),r.join("&")}(s(r(f({defaults:p.defaults},e))))),"".concat(p.host,"/r/").concat(c.replace(/.*\/\//,"")).concat(n?"?".concat(n):"").replace(/[()'"]/g,d)}t.config=p,t.crush=o,t.crushable=l,t.default=o,t.imageHosts=e,t.uncrush=h,Object.defineProperty(t,"__esModule",{value:!0})});
