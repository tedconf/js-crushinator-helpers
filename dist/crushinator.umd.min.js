!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.crushinator=e.crushinator||{})}(this,function(e){"use strict";function t(e){throw new Error(e)}function n(e){h&&"function"==typeof console.warn&&console.warn(e)}function r(e){var n=Number(e);return isFinite(n)||(t('"'+e+'" is not a finite number'),n=0),n}function o(e){return e.afterResize?"c":"precrop"}function a(e){var t=[];return t.push(r(e.width)),t.push(r(e.height)),(e.hasOwnProperty("x")||e.hasOwnProperty("y"))&&(t.push(r(e.x)),t.push(r(e.y))),t.join(",")}function i(e){return encodeURIComponent(e)}function c(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var o=e[r],a=t?t+"["+r+"]":r;n.push("object"===("undefined"==typeof o?"undefined":p["typeof"](o))?c(o,a):i(a)+"="+i(o))}return n.join("&")}function s(e){return String(e).replace(/.*\/\/([^\/]+).*/,"$1")}function f(e){return-1!==y.indexOf(s(e))}function u(e){var t=String(e).match(/(.+)?\/\/(?:(?:img(?:-ssl)?|pi)\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return t?u(t[1]+"//"+t[2]):e}function d(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return e=u(e),f(e)?("string"==typeof t&&n("Sending Crushinator options as a query string is deprecated. Please use the object format."),"object"===("undefined"==typeof t?"undefined":p["typeof"](t))&&(t=c(p["extends"](v.get(t),t.query||{}))),"https://pi.tedcdn.com/r/"+e.replace(/.*\/\//,"")+(t?"?"+t:"")):e}var p={};p["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p["extends"]=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var h="object"===("undefined"==typeof console?"undefined":p["typeof"](console)),l=Object.freeze({param:o,filter:a}),m=function(){function e(t){p.classCallCheck(this,e),this.options=t}return p.createClass(e,[{key:"dehyphenate",value:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=n.match(/([^-]+)-+(.*)/);o&&this.options.hasOwnProperty(o[1])?(t[o[1]]=t[o[1]]||{},t[o[1]][o[2]]=r):t[n]=r}return t}},{key:"get",value:function(e){var t={};e=this.dehyphenate(e);for(var n in this.options)if(e.hasOwnProperty(n)){var r=this.options[n],o=e[n],a="function"==typeof r.param?r.param(o):r.param;t[a]=r.filter(o)}return t}}]),e}(),y=["assets.tedcdn.com","pb-assets.tedcdn.com","pe.tedcdn.com","assets2.tedcdn.com","tedcdnpf-a.akamaihd.net","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","images.ted.com","storage.ted.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","staging.ted.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","www.filepicker.io","ems.ted.com","ems-staging.ted.com"],v=new m({width:{param:"w",filter:r},height:{param:"h",filter:r},quality:{param:"quality",filter:r},crop:l});e.crushable=f,e.uncrush=u,e.crush=d,e["default"]=d});