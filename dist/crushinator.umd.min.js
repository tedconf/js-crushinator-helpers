!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.crushinator=e.crushinator||{})}(this,function(e){"use strict";function t(e){throw new Error(e)}function n(e){k&&"function"==typeof console.warn&&console.warn(e)}function o(e){return void 0===e||null===e||!1===e}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0===e?t:!!e}function c(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e;return!0===e&&(r=n||1),o(e)&&(r=n),r=Number(r),isFinite(r)||(t('"'+e+'" is not a finite number'),r=n),r}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w({},r(e.defaults,!0)?j:{},e)}function i(e){return e.afterResize?"c":"precrop"}function s(e){var t=[];return t.push(c(e.width)),t.push(c(e.height)),(Object.prototype.hasOwnProperty.call(e,"x")||Object.prototype.hasOwnProperty.call(e,"y"))&&(t.push(c(e.x)),t.push(c(e.y))),t.join(",")}function d(e){var t={};return e.fit&&e.width&&e.height&&(w(t,{op:"^",c:c(e.width)+","+c(e.height)}),e.align||(t.gravity="t")),t}function u(e){var t={},n=e.unsharp;return n&&w(t,{u:{r:c(n.radius,2),s:c(n.sigma,.5),a:c(n.amount,.8),t:c(n.threshold,.03)}}),t}function f(e){var t={};return Object.keys(e).forEach(function(n){var o=e[n],r=n.match(/([^-]+)-+(.*)/);r?(t[r[1]]=t[r[1]]||{},t[r[1]][r[2]]=o):t[n]=o}),t}function p(e){var t={},n=f(e);return Object.keys(n).forEach(function(e){var o=n[e];switch(e){case"width":t.w=c(o);break;case"height":t.h=c(o);break;case"quality":t.quality=c(o);break;case"fit":w(t,d(n));break;case"align":t.gravity={top:"n",left:"w",center:"c",middle:"c",right:"e",bottom:"s"}[o]||"c";break;case"crop":t[i(o)]=s(o);break;case"blur":t.blur="object"===(void 0===o?"undefined":v(o))?c(o.radius)+","+c(o.sigma,2):"0,"+c(o,2);break;case"gamma":t.gamma="object"===(void 0===o?"undefined":v(o))?c(o.red,1)+","+c(o.green,1)+","+c(o.blue,1):c(o,1);break;case"grayscale":case"greyscale":t.grayscale=100*c(o,1);break;case"unsharp":w(t,u(n));break;case"query":w(t,o||{})}}),t}function m(e){return encodeURIComponent(e)}function l(e,t){var n=[];return Object.keys(e).forEach(function(o){var r=e[o],c=t?t+"["+o+"]":o;n.push("object"===(void 0===r?"undefined":v(r))?l(r,c):m(c)+"="+m(r))}),n.join("&")}function h(e){return String(e).replace(/.*\/\/([^\/]+).*/,"$1")}function g(e){return-1!==O.indexOf(h(e))}function b(e){var t=String(e).match(/(.+)?\/\/(?:(?:img(?:-ssl)?|pi)\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return t?b(t[1]+"//"+t[2]):e}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=b(e);if(!g(o))return o;var r={};return"string"==typeof t&&(n("Sending Crushinator options as a query string is deprecated. Please use the object format."),r=t),"object"===(void 0===t?"undefined":v(t))&&(r=l(p(a(w({defaults:S.defaults},t))))),S.host+"/r/"+o.replace(/.*\/\//,"")+(r?"?"+r:"")}var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},k="object"===("undefined"==typeof console?"undefined":v(console)),j={fit:!0,unsharp:!0,quality:82},O=["assets.tedcdn.com","assets2.tedcdn.com","ems.ted.com","ems-staging.ted.com","images.ted.com","pa.tedcdn.com","pb-assets.tedcdn.com","pe.tedcdn.com","pf.tedcdn.com","ph.tedcdn.com","pj.tedcdn.com","pk.tedcdn.com","pl.tedcdn.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","staging.ted.com","storage.ted.com","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","tedcdnpf-a.akamaihd.net","tedconfblog.files.wordpress.com","tedideas.files.wordpress.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","www.filepicker.io","www.ted.com"],S={defaults:!0,host:"https://pi.tedcdn.com"};e.imageHosts=O,e.config=S,e.crushable=g,e.uncrush=b,e.crush=y,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})});
