!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.crushinator=e.crushinator||{})}(this,function(e){"use strict";function t(e){throw new Error(e)}function n(e){b&&"function"==typeof console.warn&&console.warn(e)}function o(e){var n=Number(e);return isFinite(n)||(t('"'+e+'" is not a finite number'),n=0),n}function c(e){return e.afterResize?"c":"precrop"}function r(e){var t=[];return t.push(o(e.width)),t.push(o(e.height)),(Object.prototype.hasOwnProperty.call(e,"x")||Object.prototype.hasOwnProperty.call(e,"y"))&&(t.push(o(e.x)),t.push(o(e.y))),t.join(",")}function i(e){var t={};return e.fit&&e.width&&e.height&&l(t,{op:"^",gravity:"c",c:o(e.width)+","+o(e.height)}),t}function a(e){var t={};return Object.keys(e).forEach(function(n){var o=e[n],c=n.match(/([^-]+)-+(.*)/);c?(t[c[1]]=t[c[1]]||{},t[c[1]][c[2]]=o):t[n]=o}),t}function d(e){var t={},n=a(e);return Object.keys(n).forEach(function(e){var a=n[e];switch(e){case"width":t.w=o(a);break;case"height":t.h=o(a);break;case"quality":t.quality=o(a);break;case"fit":l(t,i(n));break;case"align":t.gravity={top:"n",left:"w",center:"c",middle:"c",right:"e",bottom:"s"}[a]||"c";break;case"crop":t[c(a)]=r(a);break;case"query":l(t,a||{})}}),t}function s(e){return encodeURIComponent(e)}function u(e,t){var n=[];return Object.keys(e).forEach(function(o){var c=e[o],r=t?t+"["+o+"]":o;n.push("object"===("undefined"==typeof c?"undefined":y(c))?u(c,r):s(r)+"="+s(c))}),n.join("&")}function f(e){return String(e).replace(/.*\/\/([^\/]+).*/,"$1")}function p(e){return g.indexOf(f(e))!==-1}function m(e){var t=String(e).match(/(.+)?\/\/(?:(?:img(?:-ssl)?|pi)\.tedcdn\.com|tedcdnpi-a\.akamaihd\.net)\/r\/([^?]+)/);return t?m(t[1]+"//"+t[2]):e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=m(e);if(!p(o))return o;var c={};return"string"==typeof t&&(n("Sending Crushinator options as a query string is deprecated. Please use the object format."),c=t),"object"===("undefined"==typeof t?"undefined":y(t))&&(c=u(d(t))),v.host+"/r/"+o.replace(/.*\/\//,"")+(c?"?"+c:"")}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b="object"===("undefined"==typeof console?"undefined":y(console)),g=["assets.tedcdn.com","pb-assets.tedcdn.com","pa.tedcdn.com","pe.tedcdn.com","pf.tedcdn.com","ph.tedcdn.com","pj.tedcdn.com","pk.tedcdn.com","pl.tedcdn.com","assets2.tedcdn.com","tedcdnpf-a.akamaihd.net","tedcdnpa-a.akamaihd.net","tedcdnpe-a.akamaihd.net","images.ted.com","storage.ted.com","tedlive.ted.com","tedlive-staging.ted.com","ted2017.ted.com","ted2017-staging.ted.com","staging.ted.com","s3.amazonaws.com","s3-us-west-2.amazonaws.com","www.filepicker.io","ems.ted.com","ems-staging.ted.com"],v={host:"https://pi.tedcdn.com"};e.config=v,e.crushable=p,e.uncrush=m,e.crush=h,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})});
